/**
 * WinBox.js v1.0.2 (Bundle)
 * Copyright 2022
 * Author: kangzw
 * Licence: 1.0.2
 */
(function(){'use strict';var e;function ba(a){var b=0;return function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}}}function k(a){if(!(a instanceof Array)){var b="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];a=b?b.call(a):{next:ba(a)};for(var c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}var l=document.createElement("style");l.innerHTML="@keyframes wb-fade-in{0%{opacity:0}to{opacity:.85}}.no-move:not(.min) .wb-title,.winbox.focus:after,.winbox.max .wb-body~div,.winbox.min .wb-body~div,.winbox.modal .wb-body~div,.winbox.modal .wb-title,body.wb-drag iframe{pointer-events:none}.winbox{position:fixed;left:0;top:0;background:#0050ff;box-shadow:0 14px 28px rgba(0,0,0,.25),0 10px 10px rgba(0,0,0,.22);transition:width .3s,height .3s,transform .3s;transition-timing-function:cubic-bezier(.3,1,.3,1);will-change:transform,width,height;contain:layout size;text-align:left;touch-action:none;min-height:35px}.max,.no-shadow{box-shadow:none}.wb-header,.wb-icon{height:35px}.wb-n,.wb-s{height:10px;left:0}.wb-body{top:35px}.wb-header{position:absolute;left:0;top:0;width:100%;color:#fff;overflow:hidden;z-index:1}.wb-e,.wb-w,.winbox iframe{width:10px;position:absolute}.wb-body{position:absolute;left:0;right:0;bottom:0;overflow:auto;-webkit-overflow-scrolling:touch;overflow-scrolling:touch;will-change:contents;background:#fff;margin-top:0!important;contain:strict}.wb-title{line-height:35px;font-family:Arial,sans-serif;font-size:14px;padding-left:10px;cursor:move;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.wb-n{position:absolute;top:-5px;right:0;cursor:n-resize}.wb-e,.wb-ne,.wb-se{right:-5px}.wb-e{top:0;bottom:0;cursor:w-resize}.wb-s{position:absolute;bottom:-5px;right:0;cursor:n-resize}.wb-w{top:0;left:-5px;bottom:0;cursor:w-resize}.wb-ne,.wb-nw,.wb-sw{width:15px;height:15px;position:absolute}.wb-nw{top:-5px;left:-5px;cursor:nw-resize}.wb-ne,.wb-sw{cursor:ne-resize}.wb-ne{top:-5px}.wb-sw{bottom:-5px;left:-5px}.wb-se{position:absolute;bottom:-5px;width:15px;height:15px;cursor:nw-resize}.wb-icon{float:right;max-width:100%;text-align:center}.wb-icon *{display:inline-block;width:30px;height:100%;background-position:center;background-repeat:no-repeat;cursor:pointer;max-width:100%}.no-close .wb-close,.no-full .wb-full,.no-header .wb-header,.no-max .wb-max,.no-min .wb-min,.no-resize .wb-body~div,.winbox.hide,.winbox.min .wb-body>*,.winbox.min .wb-full,.winbox.min .wb-min,.winbox.modal .wb-full,.winbox.modal .wb-max,.winbox.modal .wb-min,.winbox.star .wb-full,.winbox.star .wb-max,.winbox.star .wb-min{display:none}.winbox.max .wb-title,.winbox.min .wb-title{cursor:default}.wb-min{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAyIj48cGF0aCBmaWxsPSIjZmZmIiBkPSJNOCAwaDdhMSAxIDAgMCAxIDAgMkgxYTEgMSAwIDAgMSAwLTJoN3oiLz48L3N2Zz4=);background-size:14px auto;background-position:center bottom 11px}.wb-max{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9IiNmZmYiIHZpZXdCb3g9IjAgMCA5NiA5NiI+PHBhdGggZD0iTTIwIDcxLjMxMUMxNS4zNCA2OS42NyAxMiA2NS4yMyAxMiA2MFYyMGMwLTYuNjMgNS4zNy0xMiAxMi0xMmg0MGM1LjIzIDAgOS42NyAzLjM0IDExLjMxMSA4SDI0Yy0yLjIxIDAtNCAxLjc5LTQgNHY1MS4zMTF6Ii8+PHBhdGggZD0iTTkyIDc2VjM2YzAtNi42My01LjM3LTEyLTEyLTEySDQwYy02LjYzIDAtMTIgNS4zNy0xMiAxMnY0MGMwIDYuNjMgNS4zNyAxMiAxMiAxMmg0MGM2LjYzIDAgMTItNS4zNyAxMi0xMnptLTUyIDRjLTIuMjEgMC00LTEuNzktNC00VjM2YzAtMi4yMSAxLjc5LTQgNC00aDQwYzIuMjEgMCA0IDEuNzkgNCA0djQwYzAgMi4yMS0xLjc5IDQtNCA0SDQweiIvPjwvc3ZnPg==);background-size:17px auto}.wb-close{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9Ii0xIC0xIDE4IDE4Ij48cGF0aCBmaWxsPSIjZmZmIiBkPSJtMS42MTMuMjEuMDk0LjA4M0w4IDYuNTg1IDE0LjI5My4yOTNsLjA5NC0uMDgzYTEgMSAwIDAgMSAxLjQwMyAxLjQwM2wtLjA4My4wOTRMOS40MTUgOGw2LjI5MiA2LjI5M2ExIDEgMCAwIDEtMS4zMiAxLjQ5N2wtLjA5NC0uMDgzTDggOS40MTVsLTYuMjkzIDYuMjkyLS4wOTQuMDgzQTEgMSAwIDAgMSAuMjEgMTQuMzg3bC4wODMtLjA5NEw2LjU4NSA4IC4yOTMgMS43MDdBMSAxIDAgMCAxIDEuNjEzLjIxeiIvPjwvc3ZnPg==);background-size:15px auto}.wb-full{background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2ZmZiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBzdHJva2Utd2lkdGg9IjIuNSIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBkPSJNOCAzSDVhMiAyIDAgMCAwLTIgMnYzbTE4IDBWNWEyIDIgMCAwIDAtMi0yaC0zbTAgMThoM2EyIDIgMCAwIDAgMi0ydi0zTTMgMTZ2M2EyIDIgMCAwIDAgMiAyaDMiLz48L3N2Zz4=);background-size:16px auto}.winbox.hide{visibility:hidden}.max .wb-body{margin:0!important}.winbox iframe{width:100%;height:100%;border:0}.winbox.modal:before,.winbox.star:before{border-radius:inherit;content:'';position:absolute}.no-animation,body.wb-drag .winbox{transition:none}.winbox.modal:before{top:0;left:0;right:0;bottom:0;background:inherit}.winbox.modal:after{content:'';position:absolute;top:-100vh;left:-100vw;right:-100vw;bottom:-100vh;background:#0d1117;animation:wb-fade-in .2s ease-out forwards;z-index:-1}.winbox.star:before{top:0;left:0;right:0;bottom:0;background:inherit}.winbox.star:after{content:'';position:absolute;top:-100vh;left:-100vw;right:-100vw;bottom:-100vh;background:#000;animation:wb-fade-in .2s ease-out forwards;z-index:-1}.winbox.focus:after{background:0 0}.no-header .wb-body{top:0}";
var n=document.getElementsByTagName("head")[0];n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l);var ca=document.createElement("div");ca.innerHTML="<div class=wb-header><div class=wb-icon><span class=wb-min></span><span class=wb-max></span><span class=wb-full></span><span class=wb-close></span></div><div class=wb-title-icon></div><div class=wb-title> </div></div><div class=wb-body></div><div class=wb-n></div><div class=wb-s></div><div class=wb-w></div><div class=wb-e></div><div class=wb-nw></div><div class=wb-ne></div><div class=wb-se></div><div class=wb-sw></div>";function p(a,b,c,f){a.addEventListener(b,c,f||!1===f?f:!0)}function q(a){a.stopPropagation();a.cancelable&&a.preventDefault()}function r(a,b,c){c=""+c;a["_s_"+b]!==c&&(a.style.setProperty(b,c),a["_s_"+b]=c)};var v=[],z,da=0,ea=0,A,B,C,D,ha,E,I,J,N,O,P,Q=null;
function U(a,b){if(!(this instanceof U))return new U(a);A||ia();var c,f;if(a){if(b){var d=a;a=b}if("string"===typeof a)d=a;else{if(f=a.modal)var g=c="center";var m=a.id;var u=a.name;var R=a.remark;var h=a.alwaysShow;var t=a.root;var w=a.template;d=d||a.title;var F=a.mount;var G=a.html;var H=a.url;var x=a.width;var y=a.height;var V=a.minwidth;var W=a.minheight;g=a.x||g;c=a.y||c;var la=a.scale||1;var ma=a.max;var na=a.hidden;var K=a.top;var L=a.left;var S=a.bottom;var T=a.right;A=a.index||A;var oa=
a.onclose;var pa=a.onfocus;var qa=a.onblur;var ra=a.onmove;var sa=a.onresize;var fa=a.background;var aa=a.border;var ta=a["class"];var M=a["class"];var ua=a.splitscreen;var va=a.isfacing}}if(m&&[].concat(k(U.list),k(U._list)).filter(function(wa){return wa.id===m}).length)console.warn(m+"\u91cd\u590d\uff0c\u521b\u5efa\u5931\u8d25!");else return this.g=w?w:ca.cloneNode(!0),this.body=this.g.getElementsByClassName("wb-body")[0],fa&&this.setBackground(fa),aa&&r(this.body,"margin",aa+(isNaN(aa)?"":"px")),
this.setTitle(d||""),a=E,b=I,K=K?X(K,b):0,S=S?X(S,b):0,L=L?X(L,a):0,T=T?X(T,a):0,a-=L+T,b-=K+S,x=x?X(x,a):a/2|0,y=y?X(y,b):b/2|0,V=V?X(V,a):0,W=W?X(W,b):0,g=g?X(g,a,x):L,c=c?X(c,b,y):K,A=A||500,this.g.id=this.id=m||"winbox-"+ ++da,this.g.className="winbox"+(M?" "+("string"===typeof M?M:M.join(" ")):"")+(f?" modal":""),this.x=g,this.y=c,this.scale=la,this.alwaysShow=h||!1,this.remark=R,this.url=H,this.name=u,this.width=x,this.height=y,this.l=V,this.j=W,this.top=K,this.right=T,this.bottom=S,this.left=
L,this.clazz=ta,this.max=this.min=!1,this.onclose=oa,this.onfocus=pa,this.onblur=qa,this.onmove=ra,this.onresize=sa,this.m=ua,this.i=va||!0,M&&M.includes("legend")&&(this.g.className+=" no-close no-max no-resize no-full no-min no-move"),ma?this.maximize():this.move().resize(),F?this.mount(F):G?this.body.innerHTML=G:H&&this.setUrl(H),na?this.hide():this.focus(),ja(this),this.i&&p(window,"resize",function(){ka()}),(t||z).appendChild(this.g),this.alwaysShow?U._list.push(this):U.list.push(this),J=z.clientWidth,
N=z.clientHeight,this.g.winbox}U["new"]=function(a){return new U(a)};U.list=[];U._list=[];U.close=function(a){if(a=void 0===a?null:a)U.query(a).forEach(function(b){b.close&&b.close()});else for(a=U.list.length;0<a;a--)U.list[a-1].close()};U.closeAll=function(a){if(void 0===a?0:a){a=[].concat(k(U.list),k(U._list));for(var b=a.length,c=0;c<b;c++)a[c]&&a[c].close()}else for(a=[].concat(k(U.list)),b=a.length,c=0;c<b;c++)a[c].close()};
U.query=function(a){a=void 0===a?null:a;var b=U.list.concat(U._list);if(a){if("string"===typeof a)return a.startsWith("#")?b.filter(function(d){return d.id===a.substring(1)}):b.filter(function(d){return d.name===a});if("object"===typeof a){if("object"==typeof a&&"[object object]"==Object.prototype.toString.call(a).toLowerCase()&&!a.length){var c=Object.keys(a),f=b;c.forEach(function(d){f=f.filter(function(g){return g[d]===a[d]})});return f}if(/^\/.{1,}\/$/.test(a))return b.filter(function(d){return a.test(d.name)})}else return[]}else return[]};
function X(a,b,c){"string"===typeof a&&("center"===a?a=(b-c)/2|0:"right"===a||"bottom"===a?a=b-c:(c=parseFloat(a),a="%"===(""+c!==a&&a.substring((""+c).length))?b/100*c|0:c));return a}
function ia(){z=document.body;z[D="requestFullscreen"]||z[D="msRequestFullscreen"]||z[D="webkitRequestFullscreen"]||z[D="mozRequestFullscreen"]||(D="");ha=D&&D.replace("request","exit").replace("mozRequest","mozCancel").replace("Request","Exit");p(window,"resize",function(){E=z.clientWidth;I=z.clientHeight;xa()});E=z.clientWidth;I=z.clientHeight}
function ka(){null!==Q&&clearTimeout(Q);Q=setTimeout(function(){O=J;P=N;J=z.clientWidth;N=z.clientHeight;U.list.forEach(function(a){if(a.i&&!a.min&&!a.max){var b=0>a.x+J-O?0:a.x+J-O,c=0>a.y+N-P?0:a.y+N-P;a.x=b;a.y=c;r(a.g,"transform","translate("+b+"px,"+c+"px) scale("+a.scale+")")}});U._list.forEach(function(a){if(a.i&&!a.min&&!a.max){var b=0>a.x+J-O?0:a.x+J-O,c=0>a.y+N-P?0:a.y+N-P;a.x=b;a.y=c;r(a.g,"transform","translate("+b+"px,"+c+"px) scale("+a.scale+")")}})},500)}
function ja(a){Y(a,"title");Y(a,"n");Y(a,"s");Y(a,"w");Y(a,"e");Y(a,"nw");Y(a,"ne");Y(a,"se");Y(a,"sw");p(a.g.getElementsByClassName("wb-min")[0],"click",function(b){q(b);a.minimize()});p(a.g.getElementsByClassName("wb-max")[0],"click",function(b){q(b);a.focus().maximize()});D?p(a.g.getElementsByClassName("wb-full")[0],"click",function(b){q(b);a.focus().fullscreen()}):a.addClass("no-full");p(a.g.getElementsByClassName("wb-close")[0],"click",function(b){q(b);a.close()||(a=null)});p(a.g,"click",function(){a.focus()},
!1)}function Z(a){v.splice(v.indexOf(a),1);xa();a.removeClass("min");a.min=!1;a.g.title=""}function xa(){for(var a=v.length,b={},c={},f=0,d;f<a;f++)d=v[f],d=d.left+":"+d.top,c[d]?c[d]++:c[d]=1;f=0;for(var g,m,u;f<a;f++)d=v[f],g=d.left+":"+d.top,m=Math.min((E-d.left-d.right)/c[g],250),u=d.g.getElementsByClassName("wb-title")[0],u=u.clientHeight,b[g]||(b[g]=0),d.resize(m+1|0,0,!0).move(d.left+b[g]*m|0,I-d.bottom-u,!0),b[g]++}
function Y(a,b){function c(h){q(h);if(a.min)a.minimize();else{var t;if(t="title"===b)t=!a.g.classList.contains("no-max");if(t){t=Date.now();var w=t-ea;ea=t;if(250>w){a.maximize();return}}a.max||(z.classList.add("wb-drag"),(m=h.touches)&&(m=m[0])?(h=m,p(window,"touchmove",f),p(window,"touchend",d)):(p(window,"mousemove",f),p(window,"mouseup",d)),u=h.pageX,R=h.pageY,a.focus())}}function f(h){q(h);m&&(h=h.touches[0]);var t=h.pageX;h=h.pageY;var w=t-u,F=h-R,G;if("title"===b){a.x+=w;a.y+=F;var H=G=1}else{if("e"===
b||"se"===b||"ne"===b){a.width+=w;var x=1}else if("w"===b||"sw"===b||"nw"===b)a.x+=w,a.width-=w,H=x=1;if("s"===b||"se"===b||"sw"===b){a.height+=F;var y=1}else if("n"===b||"ne"===b||"nw"===b)a.y+=F,a.height-=F,G=y=1}if(x||y)x&&(a.width=Math.max(Math.min(a.width,E-a.x-a.right),150)),y&&(a.height=Math.max(Math.min(a.height,I-a.y-a.bottom),0)),a.resize();if(H||G)H&&(a.x=Math.max(Math.min(a.x,E-a.width-a.right),a.left)),G&&(a.y=Math.max(Math.min(a.y,I-a.height-a.bottom),a.top)),a.move();u=t;R=h}function d(h){q(h);
z.classList.remove("wb-drag");m?(window.removeEventListener("touchmove",f,!0),window.removeEventListener("touchend",d,!0)):(window.removeEventListener("mousemove",f,!0),window.removeEventListener("mouseup",d,!0))}var g=a.g.getElementsByClassName("wb-"+b)[0],m,u,R;p(g,"mousedown",c);p(g,"touchstart",c,{passive:!1})}e=U.prototype;e.mount=function(a){this.unmount();a.h||(a.h=a.parentNode);this.body.textContent="";this.body.appendChild(a);return this};
e.unmount=function(a){var b=this.body.firstChild;if(b){var c=a||b.h;c&&c.appendChild(b);b.h=a}return this};e.setTitle=function(a){a=this.title=a;this.g.getElementsByClassName("wb-title")[0].firstChild.nodeValue=a;return this};e.setBackground=function(a){r(this.g,"background",a);return this};e.setUrl=function(a){this.body.innerHTML='<iframe src="'+a+'"></iframe>';return this};
e.focus=function(){C!==this&&(r(this.g,"z-index",A++),this.addClass("focus"),C&&(C.removeClass("focus"),C.onblur&&C.onblur()),C=this,this.onfocus&&this.onfocus());return this};e.hide=function(){return this.addClass("hide")};e.show=function(){return this.removeClass("hide")};
e.minimize=function(a){B&&ya();!a&&this.min?(Z(this),this.resize().move().focus()):!1===a||this.min||(v.push(this),xa(),this.g.title=this.title,this.addClass("min"),this.min=!0);this.max&&(this.removeClass("max"),this.max=!1);return this};e.maximize=function(a){if("undefined"===typeof a||a!==this.max)this.min&&Z(this),(this.max=!this.max)?this.addClass("max").resize(E-this.left-this.right,I-this.top-this.bottom,!0).move(this.left,this.top,!0):this.resize().move().removeClass("max");return this};
e.fullscreen=function(a){if("undefined"===typeof a||a!==B)this.min&&(this.resize().move(),Z(this)),B&&ya()||(this.body[D](),B=!0);return this};function ya(){B=!1;if(document.fullscreen||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)return document[ha](),!0}
e.close=function(a){var b=this;if(this.onclose&&this.onclose(a))return!0;this.min&&Z(this);this.unmount();this.g.parentNode.removeChild(this.g);C===this&&(C=null);this.alwaysShow?U._list.splice(U._list.indexOf(U._list.find(function(c){return c.id===b.id})),1):U.list.splice(U.list.indexOf(U.list.find(function(c){return c.id===b.id})),1)};
e.move=function(a,b,c){a||0===a?c||(this.x=a?a=X(a,E-this.left-this.right,this.width):0,this.y=b?b=X(b,I-this.top-this.bottom,this.height):0):(a=this.x,b=this.y,this.m&&(0===a?this.resize(E/2,I):a===E-this.width&&this.resize(E/2,I)));r(this.g,"transform","translate("+a+"px,"+b+"px) scale("+this.scale+")");this.onmove&&this.onmove(a,b);return this};
e.resize=function(a,b,c){a||0===a?c||(this.width=a?a=X(a,E-this.left-this.right):0,this.height=b?b=X(b,I-this.top-this.bottom):0):(a=this.width,b=this.height);a=Math.max(a,this.l);b=Math.max(b,this.j);r(this.g,"width",a+"px");r(this.g,"height",b+"px");this.onresize&&this.onresize(a,b);return this};e.addClass=function(a){this.g.classList.add(a);return this};e.removeClass=function(a){this.g.classList.remove(a);return this};window.WinBox=U;}).call(this);
